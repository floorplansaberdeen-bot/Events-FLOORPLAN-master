<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Floorplan</title>
  <style>
    :root{
      --accentText:rgb(213,109,50);
      --bg:#ffffff; --card:#ffffff; --border:#e9e9e9; --text:#111; --muted:rgb(213,109,50);
      --avail: rgba(213,109,50,0.75); --sold: rgba(230,59,59,0.75); --orange: rgba(213,109,50,0.75); --selected: rgba(230,59,59,0.75); --shadow: 0 12px 30px rgba(0,0,0,.12);
      --dot: 10px; --line:rgba(110,110,110,.9); --safe: env(safe-area-inset-bottom, 0px);
    }
    *{ box-sizing:border-box; }
    body{ margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; background:var(--bg); color:var(--text); }
    header{ padding:14px 16px; border-bottom:1px solid var(--border); display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap; position:sticky; top:0; z-index:50; background:var(--bg); }
    .title{ font-weight:950; font-size:18px; }
    .meta{ color:var(--muted); font-weight:800; font-size:13px; display:flex; gap:12px; flex-wrap:wrap; align-items:center; }
    main{ padding:16px; display:grid; grid-template-columns: 1.15fr 0.85fr; gap:16px; align-items:start; }
    .card{ background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow: 0 1px 0 rgba(0,0,0,.02); overflow:hidden; }
    .cardHead{ padding:10px 12px; font-weight:900; border-bottom:1px solid var(--border); }
    .planBody{ padding:12px; }
    .planStack{ position:relative; border-radius:14px; overflow:hidden; background:#fff; }
    /* Desktop: give the plan a sensible minimum height.
       Mobile overrides remove this to avoid white dead space below the SVG. */
    .planWrap{ position:relative; border-radius:14px; overflow:hidden; background:#fff; min-height:420px; }
    .svgHost{ width:100%; height:auto; display:block; }
    .labelBay{ background:#fff; border-top:1px solid var(--border); padding:12px; min-height:72px; }
    .lozenge{ display:inline-block; background:#fff; border-radius:999px; padding:12px 16px; box-shadow: var(--shadow); border:1px solid rgba(0,0,0,.08); max-width: 360px; }
    .lozStand{ font-size:28px; font-weight:900; line-height:1.1; }
    .lozCompany{ margin-top:4px; font-size:16px; font-weight:800; opacity:.9; }
    .calloutSvg{ position:absolute; left:0; top:0; width:100%; height:100%; pointer-events:none; }
    .panelBody{ padding:12px; }
    .searchRow{ display:flex; gap:10px; align-items:center; }
    input{ width:100%; padding:10px 12px; border-radius:12px; border:1px solid var(--border); font-weight:800; }
    button{ border:1px solid var(--border); background:#fff; padding:10px 12px; border-radius:12px; font-weight:900; cursor:pointer; }
    button:disabled{ opacity:.45; cursor:not-allowed; }
    .countLine{ padding:0 12px 10px; color:var(--muted); font-weight:800; }
    .listWrap{ border-top:1px solid var(--border); overflow:auto; max-height: calc(100vh - 240px); padding-bottom: calc(14px + var(--safe)); }
    table{ width:100%; border-collapse:collapse; font-size:13px; }
    th, td{ padding:10px 10px; border-top:1px solid #f0f0f0; text-align:left; }
    th{ background:#fafafa; border-top:none; font-size:12px; color:var(--muted); position:sticky; top:0; }
    tr.active{ background:#f5f8ff; outline:2px solid #c9d5ff; outline-offset:-2px; }
    @media (max-width: 980px){ main{ grid-template-columns: 1fr; } }

    /* Mobile: reduce vertical waste and keep the search row visible while scrolling the list */
    @media (max-width: 640px){
      main{ padding:12px; gap:12px; }

      /* Keep the plan card pinned at the top (below the sticky header) */
      .card.plan{ position: sticky; top: 56px; z-index: 20; background: var(--bg); }

      /* Keep the plan compact on phones so you see more of the exhibitor list.
         The SVG viewBox includes generous whitespace, so we cap the plan's height. */
      .planWrap{ min-height: 0; max-height: 42vh; }

      /* Let the SVG size itself to the capped planWrap height on mobile */
      #svgHost{ height: 100%; }
      #svgHost > svg{ width: 100%; height: 100%; }

      /* Slightly tighter spacing */
      .planBody{ padding:10px; }
      .labelBay{ padding:10px; min-height: 56px; }

      /* Show more rows at once on small screens */
      .listWrap{ max-height: calc(100vh - 300px); }

      /* The exhibitors list scrolls inside .listWrap, so the search bar stays visible. */
    }
  
  /* heading orange */
  h1, h2, h3 { color: #d56d32; }

  /* v38 typography */
  h1, h2, h3 { color: #d56d32; }
  b, strong, th { color: #d56d32; }
  /* v38 callout line enforcement */
  #calloutSvg line, #calloutSvg circle { stroke: rgba(70,70,70,.85) !important; fill: rgba(70,70,70,.90) !important; }

  /* v39 orange sweep */
  .cardHead, .cardTitle, .sectionTitle, .topTitle, .brand, .pageTitle,
  .title, .headerTitle, .panelTitle { color: var(--accentText) !important; }
  b, strong, th { color: var(--accentText) !important; }
  /* callout line/dot */
  #calloutSvg line { stroke: rgba(110,110,110,.9) !important; }
  #calloutSvg circle { stroke: rgba(110,110,110,.9) !important; fill: rgba(110,110,110,.95) !important; }
</style>
  <link rel="icon" href="./favicon.ico">
</head>
<body>
  <header>
    <div class="title" id="eventNameTitle">Exhibitors</div>
    <div class="meta">
      <div>Last updated: <span id="updatedAt">—</span></div>
    </div>
  </header>

  <main>
    <section class="card plan">
      <div class="cardHead">Plan</div>
      <div class="planBody">
        <div class="planStack" id="planStack">
          <div class="planWrap" id="planWrap">
            <div id="svgHost" class="svgHost"></div>
          </div>
          <div class="labelBay" id="labelBay">
            <div class="lozenge" id="lozenge" style="display:none;">
              <div class="lozStand" id="lozStand">—</div>
              <div class="lozCompany" id="lozCompany" style="display:none;"></div>
            </div>
          </div>
          <svg class="calloutSvg" id="calloutSvg" aria-hidden="true"></svg>
        </div>
      </div>
    </section>

    <aside class="card">
      <div class="cardHead">Exhibitors</div>
      <div class="panelBody">
        <div class="searchRow">
          <input id="search" placeholder="Search company or stand…" />
          <button id="clearSearchBtn" type="button" disabled>Clear</button>
        </div>
      </div>
      <div class="countLine"><span id="count">0</span> / <span id="total">0</span></div>
      <div class="listWrap" id="listWrap">
        <table>
          <thead>
            <tr><th style="width:90px;">Stand</th><th>Company</th></tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>
      </div>
    </aside>
  </main>

  <script src="./shared.js?v=20260214b"></script>
  <script src="./index.js?v=20260214b" defer></script>
</body>
</html>
